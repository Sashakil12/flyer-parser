PS F:\badiyala-flyer-parser> pnpm dev

> badiyala-flyer-parser@1.0.0 dev F:\badiyala-flyer-parser
> next dev

  ‚ñ≤ Next.js 14.2.31
  - Local:        http://localhost:3000
  - Environments: .env.local

 ‚úì Starting...
 ‚ö† Invalid next.config.js options detected:
 ‚ö†     Unrecognized key(s) in object: 'appDir' at "experimental"
 ‚ö† See more info here: https://nextjs.org/docs/messages/invalid-next-config
 ‚úì Ready in 3.8s
 ‚óã Compiling /api/inngest ...
 ‚úì Compiled /api/inngest in 1075ms (209 modules)
üìã Loading Firebase service account from: ./firebase-service-account.json
‚úÖ Firebase Admin initialized with service account file
üîß Initializing Inngest serve handler...
üìä Functions to register: 3
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: true,
  'sync_id.omitempty': '6ecf7f93-4070-4a56-887e-0b543bfa1799',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 3248ms
 ‚óã Compiling / ...
 ‚úì Compiled / in 7.3s (1102 modules)
üîß Initializing Inngest serve handler...
üìä Functions to register: 3
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': 'e44d4be5-7289-449e-9057-f3d6235396c5',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 3539ms
 ‚úì Compiled in 1125ms (353 modules)
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '888996c0-bc07-423d-a81e-8aad88f86e5e',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 31ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '33ef621a-da6b-49fa-9a4e-3f004c8165aa',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 24ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '895f9fe4-98ed-42f9-8b1a-b15344ed4e5d',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 28ms
 ‚úì Compiled /api/inngest/trigger-parse in 481ms (777 modules)
üöÄ Trigger parse API called
üì¶ Request body: {
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz',
  storageUrl: 'https://firebasestorage.googleapis.com/v0/b/badiyala-staging.firebasestorage.app/o/flyer-images%2F0ed2b7b2-f5fd-4286-aec2-6644a4a40c9e.jpg?alt=media&token=940b870a-d579-401a-b104-e15111c75f68'
}
üîÑ Sending event to Inngest...
‚úÖ Inngest event sent: { ids: [ '01K31ATSRPM67FNAH93GSM9RB5' ] }
 POST /api/inngest/trigger-parse 200 in 2165ms
üîß Initializing Inngest serve handler...
üìä Functions to register: 3
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [] +1ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +1ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +10ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z executing step "update-status-processing" +2ms
üìù Updating flyer image ZVZmbXKnALyQjbVhB0lz status to: processing
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '0d346f08-12d8-47c9-9025-09f1b86f6f5f',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 29ms
‚úÖ Successfully updated flyer image ZVZmbXKnALyQjbVhB0lz status to: processing
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
    op: 'StepRun',
    name: 'update-status-processing',
    opts: {},
    displayName: 'update-status-processing',
    data: { status: 'processing' }
  }
} +968ms
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 206 in 1041ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [ 'f7da0e77dad8df9368c4406057dce67b98eed9fa' ] +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +1ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +3ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z executing step "parse-with-gemini" +1ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '62129eb6-dfe7-45ee-a114-689df13d7da7',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 29ms
 ‚óã Compiling /flyers ...
 ‚úì Compiled /flyers in 1096ms (1159 modules)
üîß Initializing Inngest serve handler...
üìä Functions to register: 3
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '573860e3-7660-4cb9-907a-7a2cb019037f',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 48ms
 ‚ö† The "images.domains" configuration is deprecated. Please use "images.remotePatterns" configuration instead.
 ‚óã Compiling /flyers/[id] ...
 ‚úì Compiled /flyers/[id] in 1145ms (1205 modules)
üîß Initializing Inngest serve handler...
üìä Functions to register: 3
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '97422411-8b7b-43bf-a0e8-b1d5a266d16b',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 109ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '8b85ad12-048e-4c0b-8727-eb90e6912793',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 25ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '7cfd06cd-d0f9-48c1-b0ec-40864058b62a',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 30ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': 'a141d0e7-0292-4af5-aec5-6e618213c629',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 24ms
ü§ñ Raw Gemini response length: 6387
üîç Raw response preview: [
  {
    "product_name": "Savex Premium Color & Care Detergent 5.5kg",
    "product_name_mk": "–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –ö–æ–ª–æ—Ä & –ö–µ—Ä –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥",
    "product_name_prefixes": [
      "S",
      "Sa",
     ...
‚ú® Cleaned text length: 6245
üîç Cleaned text preview: [  {    "product_name": "Savex Premium Color & Care Detergent 5.5kg",    "product_name_mk": "–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –ö–æ–ª–æ—Ä & –ö–µ—Ä –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥",    "product_name_prefixes": [      "S",      "Sa",      "Sav",...
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'parse-with-gemini': {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
    op: 'StepRun',
    name: 'parse-with-gemini',
    opts: {},
    displayName: 'parse-with-gemini',
    data: { success: true, data: [Array] }
  }
} +32s
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 206 in 32248ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [
  'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
  'f7da0e77dad8df9368c4406057dce67b98eed9fa'
] +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +0ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +12ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z executing step "save-parsed-data" +1ms
üìù Adding parsed item for flyer: ZVZmbXKnALyQjbVhB0lz
‚úÖ Successfully added parsed item with ID: 01xb6vZYNPK6CFmFbJov
üìù Adding parsed item for flyer: ZVZmbXKnALyQjbVhB0lz
‚úÖ Successfully added parsed item with ID: ppfi7h7S0wO4Sm0ixgNC
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'parse-with-gemini': {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'save-parsed-data': {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
    op: 'StepRun',
    name: 'save-parsed-data',
    opts: {},
    displayName: 'save-parsed-data',
    data: [ '01xb6vZYNPK6CFmFbJov', 'ppfi7h7S0wO4Sm0ixgNC' ]
  }
} +940ms
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 206 in 974ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [
  '1d6a9892f7c8144392ea31eec78dc637b362d10f',
  'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
  'f7da0e77dad8df9368c4406057dce67b98eed9fa'
] +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +1ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'trigger-product-matching',
      op: 'StepPlanned',
      name: 'trigger-product-matching',
      displayName: 'trigger-product-matching',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +4ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z executing step "trigger-product-matching" +1ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'parse-with-gemini': {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'save-parsed-data': {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'trigger-product-matching': {
      id: 'trigger-product-matching',
      op: 'StepPlanned',
      name: 'trigger-product-matching',
      displayName: 'trigger-product-matching',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
    op: 'StepRun',
    name: 'trigger-product-matching',
    opts: {},
    displayName: 'trigger-product-matching',
    data: null
  }
} +12ms
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 206 in 36ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [
  '1d6a9892f7c8144392ea31eec78dc637b362d10f',
  'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
  'f5ef091509a1e35daf3df114b407c52c12a359e5',
  'f7da0e77dad8df9368c4406057dce67b98eed9fa'
] +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +0ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'trigger-product-matching',
      op: 'StepPlanned',
      name: 'trigger-product-matching',
      displayName: 'trigger-product-matching',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'update-status-completed',
      op: 'StepPlanned',
      name: 'update-status-completed',
      displayName: 'update-status-completed',
      opts: {},
      rawArgs: [Array],
      hashedId: '36c11c3a280bc8856f5fadb4a32c725b2269d4e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +5ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z executing step "update-status-completed" +1ms
üìù Updating flyer image ZVZmbXKnALyQjbVhB0lz status to: completed
  inngest:01K31AVVY48R5M456VQHMPM5EV created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV existing state keys: [] +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV starting V1 execution +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 existing state keys: [] +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVX0ZH0NHGH3JHZN0E3V',
  parsedItemId: 'ppfi7h7S0wO4Sm0ixgNC'
}
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVWV4DAW9NBN5DWHVNXT',
  parsedItemId: '01xb6vZYNPK6CFmFbJov'
}
  inngest:01K31AVVY48R5M456VQHMPM5EV checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +6ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +6ms
  inngest:01K31AVVY48R5M456VQHMPM5EV executing step "update-status-to-processing" +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 executing step "update-status-to-processing" +0ms
üìù Updating parsed flyer item ppfi7h7S0wO4Sm0ixgNC
üìù Updating parsed flyer item 01xb6vZYNPK6CFmFbJov
‚úÖ Successfully updated flyer image ZVZmbXKnALyQjbVhB0lz status to: completed
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'parse-with-gemini': {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'save-parsed-data': {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'trigger-product-matching': {
      id: 'trigger-product-matching',
      op: 'StepPlanned',
      name: 'trigger-product-matching',
      displayName: 'trigger-product-matching',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'update-status-completed': {
      id: 'update-status-completed',
      op: 'StepPlanned',
      name: 'update-status-completed',
      displayName: 'update-status-completed',
      opts: {},
      rawArgs: [Array],
      hashedId: '36c11c3a280bc8856f5fadb4a32c725b2269d4e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '36c11c3a280bc8856f5fadb4a32c725b2269d4e5',
    op: 'StepRun',
    name: 'update-status-completed',
    opts: {},
    displayName: 'update-status-completed',
    data: { status: 'completed', savedItems: 2 }
  }
} +414ms
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 206 in 443ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z created new V1 execution for run; discovering steps +0ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z existing state keys: [
  '1d6a9892f7c8144392ea31eec78dc637b362d10f',
  '36c11c3a280bc8856f5fadb4a32c725b2269d4e5',
  'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
  'f5ef091509a1e35daf3df114b407c52c12a359e5',
  'f7da0e77dad8df9368c4406057dce67b98eed9fa'
] +1ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z starting V1 execution +0ms
üî• INNGEST FUNCTION TRIGGERED! {
  eventId: '01K31ATSRPM67FNAH93GSM9RB5',
  flyerImageId: 'ZVZmbXKnALyQjbVhB0lz'
}
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z checkpoint: {
  type: 'function-resolved',
  data: {
    flyerImageId: 'ZVZmbXKnALyQjbVhB0lz',
    itemsSaved: 2,
    status: 'completed'
  }
} +4ms
  inngest:01K31ATSXVJQY2E3PXSHRHZG1Z result: {
  type: 'function-resolved',
  ctx: {
    event: {
      data: [Object],
      id: '01K31ATSRPM67FNAH93GSM9RB5',
      name: 'flyer/parse',
      ts: 1755612800790,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31ATSXVJQY2E3PXSHRHZG1Z',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-processing': {
      id: 'update-status-processing',
      op: 'StepPlanned',
      name: 'update-status-processing',
      displayName: 'update-status-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f7da0e77dad8df9368c4406057dce67b98eed9fa',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'parse-with-gemini': {
      id: 'parse-with-gemini',
      op: 'StepPlanned',
      name: 'parse-with-gemini',
      displayName: 'parse-with-gemini',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd6aa71717215b46efa2d36ca14a6e091fc7a9b3d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'save-parsed-data': {
      id: 'save-parsed-data',
      op: 'StepPlanned',
      name: 'save-parsed-data',
      displayName: 'save-parsed-data',
      opts: {},
      rawArgs: [Array],
      hashedId: '1d6a9892f7c8144392ea31eec78dc637b362d10f',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'trigger-product-matching': {
      id: 'trigger-product-matching',
      op: 'StepPlanned',
      name: 'trigger-product-matching',
      displayName: 'trigger-product-matching',
      opts: {},
      rawArgs: [Array],
      hashedId: 'f5ef091509a1e35daf3df114b407c52c12a359e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'update-status-completed': {
      id: 'update-status-completed',
      op: 'StepPlanned',
      name: 'update-status-completed',
      displayName: 'update-status-completed',
      opts: {},
      rawArgs: [Array],
      hashedId: '36c11c3a280bc8856f5fadb4a32c725b2269d4e5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    }
  },
  data: {
    flyerImageId: 'ZVZmbXKnALyQjbVhB0lz',
    itemsSaved: 2,
    status: 'completed'
  }
} +0ms
 POST /api/inngest?fnId=badiyala-flyer-parser-parse-flyer&stepId=step 200 in 25ms
üîç Update data structure check: {"matchingStatus":"processing","updatedAt":"2025-08-19T14:13:56.599Z"}...
üîç Update data structure check: {"matchingStatus":"processing","updatedAt":"2025-08-19T14:13:56.784Z"}...
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '797c95f0-ae5e-40c5-a539-165576afc93f',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 21ms
‚úÖ Successfully updated parsed flyer item 01xb6vZYNPK6CFmFbJov
  inngest:01K31AVVYACFAN20C9RTA786Z3 result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVWV4DAW9NBN5DWHVNXT',
      name: 'flyer/product-match',
      ts: 1755612835739,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVYACFAN20C9RTA786Z3',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
    op: 'StepRun',
    name: 'update-status-to-processing',
    opts: {},
    displayName: 'update-status-to-processing',
    data: null
  }
} +1s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 1126ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 existing state keys: [ 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d' ] +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 starting V1 execution +1ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVWV4DAW9NBN5DWHVNXT',
  parsedItemId: '01xb6vZYNPK6CFmFbJov'
}
  inngest:01K31AVVYACFAN20C9RTA786Z3 checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 executing step "search-products" +1ms
üîç Searching for products matching: Savex Premium Color & Care Detergent 5.5kg
üîç Enhanced search for products matching: Savex Premium Color & Care Detergent 5.5kg
üîç Extracting keywords from: "Savex Premium Color & Care Detergent 5.5kg"
üîç Additional texts: -30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.
üîç Cleaned text: "savex premium color care detergent 5 5kg"
üîç Base words extracted: [ 'savex', 'premium', 'color', 'care', 'detergent', '5kg' ]
üîç Additional words from "-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.": [
  '30',     '68',
  'washes', '50',
  'points', '1kg',
  '107'
]
üîç Final unique keywords: [
  'savex',     'premium',
  'color',     'care',
  'detergent', '5kg',
  '30',        '68',
  'washes',    '50',
  'points',    '1kg',
  '107'
]
üîç Extracting keywords from: "–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –ö–æ–ª–æ—Ä & –ö–µ—Ä –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥"
üîç Additional texts: -30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.
üîç Cleaned text: "—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º –∫–æ–ª–æ—Ä –∫–µ—Ä –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5 5–∫–≥"
üîç Base words extracted: [ '—Å–∞–≤–µ–∫—Å', '–ø—Ä–µ–º–∏—É–º', '–∫–æ–ª–æ—Ä', '–∫–µ—Ä', '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥' ]
üîç Additional words from "-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.": [
  '30',     '68',
  '–ø–µ—Ä–µ—ö–∞', '50',
  '–ø–æ–µ–Ω–∏',  '1–∫–≥',
  '107'
]
üîç Final unique keywords: [
  '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
  '–∫–æ–ª–æ—Ä',     '–∫–µ—Ä',
  '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
  '30',        '68',
  '–ø–µ—Ä–µ—ö–∞',    '50',
  '–ø–æ–µ–Ω–∏',     '1–∫–≥',
  '107'
]
üîç Keyword extraction debug: {
  productName: 'Savex Premium Color & Care Detergent 5.5kg',
  productNameMk: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –ö–æ–ª–æ—Ä & –ö–µ—Ä –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  additionalInfo: '-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.',
  additionalInfoMk: '-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.',
  extractedEnglishKeywords: [
    'savex',     'premium',
    'color',     'care',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50',
    'points',    '1kg',
    '107'
  ],
  extractedMacedonianKeywords: [
    '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '–∫–æ–ª–æ—Ä',     '–∫–µ—Ä',
    '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
    '30',        '68',
    '–ø–µ—Ä–µ—ö–∞',    '50',
    '–ø–æ–µ–Ω–∏',     '1–∫–≥',
    '107'
  ]
}
üîç Searching with keywords: savex, premium, color, care, detergent, 5kg, 30, 68, washes, 50
üìã Search parameters: {
  productName: 'Savex Premium Color & Care Detergent 5.5kg',
  productNameMk: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –ö–æ–ª–æ—Ä & –ö–µ—Ä –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  additionalInfo: '-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.',
  additionalInfoMk: '-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.',
  englishKeywords: [
    'savex',     'premium',
    'color',     'care',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50',
    'points',    '1kg',
    '107'
  ],
  macedonianKeywords: [
    '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '–∫–æ–ª–æ—Ä',     '–∫–µ—Ä',
    '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
    '30',        '68',
    '–ø–µ—Ä–µ—ö–∞',    '50',
    '–ø–æ–µ–Ω–∏',     '1–∫–≥',
    '107'
  ],
  allKeywords: [
    'savex', 'premium',   'color',
    'care',  'detergent', '5kg',
    '30',    '68',        'washes',
    '50',    'points',    '1kg',
    '107',   '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '–∫–æ–ª–æ—Ä', '–∫–µ—Ä',       '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç',
    '5–∫–≥',   '–ø–µ—Ä–µ—ö–∞',    '–ø–æ–µ–Ω–∏',
    '1–∫–≥'
  ],
  limitedKeywords: [
    'savex',     'premium',
    'color',     'care',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50'
  ]
}
üîç Testing products collection access...
‚úÖ Successfully updated parsed flyer item ppfi7h7S0wO4Sm0ixgNC
  inngest:01K31AVVY48R5M456VQHMPM5EV result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVX0ZH0NHGH3JHZN0E3V',
      name: 'flyer/product-match',
      ts: 1755612835744,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVY48R5M456VQHMPM5EV',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
    op: 'StepRun',
    name: 'update-status-to-processing',
    opts: {},
    displayName: 'update-status-to-processing',
    data: null
  }
} +1s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 1392ms
  inngest:01K31AVVY48R5M456VQHMPM5EV created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV existing state keys: [ 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d' ] +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV starting V1 execution +1ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVX0ZH0NHGH3JHZN0E3V',
  parsedItemId: 'ppfi7h7S0wO4Sm0ixgNC'
}
  inngest:01K31AVVY48R5M456VQHMPM5EV checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +2ms
  inngest:01K31AVVY48R5M456VQHMPM5EV executing step "search-products" +0ms
üîç Searching for products matching: Savex Premium Fresh Universal Detergent 5.5kg
üîç Enhanced search for products matching: Savex Premium Fresh Universal Detergent 5.5kg
üîç Extracting keywords from: "Savex Premium Fresh Universal Detergent 5.5kg"
üîç Additional texts: -30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.
üîç Cleaned text: "savex premium fresh universal detergent 5 5kg"
üîç Base words extracted: [ 'savex', 'premium', 'fresh', 'universal', 'detergent', '5kg' ]
üîç Additional words from "-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.": [
  '30',     '68',
  'washes', '50',
  'points', '1kg',
  '107'
]
üîç Final unique keywords: [
  'savex',     'premium',
  'fresh',     'universal',
  'detergent', '5kg',
  '30',        '68',
  'washes',    '50',
  'points',    '1kg',
  '107'
]
üîç Extracting keywords from: "–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥"
üîç Additional texts: -30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.
üîç Cleaned text: "—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5 5–∫–≥"
üîç Base words extracted: [ '—Å–∞–≤–µ–∫—Å', '–ø—Ä–µ–º–∏—É–º', '—Ñ—Ä–µ—à', '—É–Ω–∏–≤–µ—Ä–∑–∞–ª', '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥' ]
üîç Additional words from "-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.": [
  '30',     '68',
  '–ø–µ—Ä–µ—ö–∞', '50',
  '–ø–æ–µ–Ω–∏',  '1–∫–≥',
  '107'
]
üîç Final unique keywords: [
  '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
  '—Ñ—Ä–µ—à',      '—É–Ω–∏–≤–µ—Ä–∑–∞–ª',
  '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
  '30',        '68',
  '–ø–µ—Ä–µ—ö–∞',    '50',
  '–ø–æ–µ–Ω–∏',     '1–∫–≥',
  '107'
]
üîç Keyword extraction debug: {
  productName: 'Savex Premium Fresh Universal Detergent 5.5kg',
  productNameMk: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  additionalInfo: '-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.',
  additionalInfoMk: '-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.',
  extractedEnglishKeywords: [
    'savex',     'premium',
    'fresh',     'universal',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50',
    'points',    '1kg',
    '107'
  ],
  extractedMacedonianKeywords: [
    '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '—Ñ—Ä–µ—à',      '—É–Ω–∏–≤–µ—Ä–∑–∞–ª',
    '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
    '30',        '68',
    '–ø–µ—Ä–µ—ö–∞',    '50',
    '–ø–æ–µ–Ω–∏',     '1–∫–≥',
    '107'
  ]
}
üîç Searching with keywords: savex, premium, fresh, universal, detergent, 5kg, 30, 68, washes, 50
üìã Search parameters: {
  productName: 'Savex Premium Fresh Universal Detergent 5.5kg',
  productNameMk: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  additionalInfo: '-30%, 68 washes, +50 points, 1kg = 107 –¥–µ–Ω.',
  additionalInfoMk: '-30%, 68 –ø–µ—Ä–µ—ö–∞, +50 –ø–æ–µ–Ω–∏, 1–∫–≥ = 107 –¥–µ–Ω.',
  englishKeywords: [
    'savex',     'premium',
    'fresh',     'universal',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50',
    'points',    '1kg',
    '107'
  ],
  macedonianKeywords: [
    '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '—Ñ—Ä–µ—à',      '—É–Ω–∏–≤–µ—Ä–∑–∞–ª',
    '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç', '5–∫–≥',
    '30',        '68',
    '–ø–µ—Ä–µ—ö–∞',    '50',
    '–ø–æ–µ–Ω–∏',     '1–∫–≥',
    '107'
  ],
  allKeywords: [
    'savex',     'premium',   'fresh',
    'universal', 'detergent', '5kg',
    '30',        '68',        'washes',
    '50',        'points',    '1kg',
    '107',       '—Å–∞–≤–µ–∫—Å',    '–ø—Ä–µ–º–∏—É–º',
    '—Ñ—Ä–µ—à',      '—É–Ω–∏–≤–µ—Ä–∑–∞–ª', '–¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç',
    '5–∫–≥',       '–ø–µ—Ä–µ—ö–∞',    '–ø–æ–µ–Ω–∏',
    '1–∫–≥'
  ],
  limitedKeywords: [
    'savex',     'premium',
    'fresh',     'universal',
    'detergent', '5kg',
    '30',        '68',
    'washes',    '50'
  ]
}
üîç Testing products collection access...
üìä Products collection accessible: 1 test doc(s) found
üìä Sample product structure: {
  id: ' 00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  hasEnglishNameKeywords: true,
  hasMacedonianname: true,
  hasKeywords: false
}
üîç Stage 1: Searching englishNameKeywords
üìä Products collection accessible: 1 test doc(s) found
üìä Sample product structure: {
  id: ' 00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  hasEnglishNameKeywords: true,
  hasMacedonianname: true,
  hasKeywords: false
}
üîç Stage 1: Searching englishNameKeywords
üìä Stage 1: englishNameKeywords: Found 1 results
üîç Stage 1: englishNameKeywords - Product found: {
  id: '00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  macedonianname: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  albenianname: 'Detergjent Savex Premium Fresh 5.5kg',
  keywords: [],
  tags: [],
  englishNameKeywords: ["s","sa","sav","save","savex","savex ","savex p","savex pr","savex pre","savex prem","savex premi","savex premium","savex premium f","savex premium fr","savex premium fre","savex premium fresh","savex premium fresh u","savex premium fresh un","savex premium fresh uni","savex premium fresh universal","savex premium fresh universal detergent","savex premium fresh universal detergent 5","savex premium fresh universal detergent 5.5","savex premium fresh universal detergent 5.5kg"],
  macedoniannameKeywords: ["—Å","—Å–∞","—Å–∞–≤","—Å–∞–≤–µ","—Å–∞–≤–µ–∫","—Å–∞–≤–µ–∫—Å","—Å–∞–≤–µ–∫—Å ","—Å–∞–≤–µ–∫—Å –ø","—Å–∞–≤–µ–∫—Å –ø—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥"],
  albeniannameKeywords: ["d","de","det","deter","deterg","detergj","detergje","detergjent","detergjent s","detergjent sa","detergjent sav","detergjent savex","detergjent savex ","detergjent savex p","detergjent savex pr","detergjent savex premium","detergjent savex premium fresh","detergjent savex premium fresh 5","detergjent savex premium fresh 5.5","detergjent savex premium fresh 5.5kg"]
}
‚úÖ Stage 1: englishNameKeywords - Added unique product: Savex Premium Fresh Universal Detergent 5.5kg
üîç Stage 2: Searching macedoniannameKeywords
üìä Stage 1: englishNameKeywords: Found 1 results
üîç Stage 1: englishNameKeywords - Product found: {
  id: '00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  macedonianname: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  albenianname: 'Detergjent Savex Premium Fresh 5.5kg',
  keywords: [],
  tags: [],
  englishNameKeywords: ["s","sa","sav","save","savex","savex ","savex p","savex pr","savex pre","savex prem","savex premi","savex premium","savex premium f","savex premium fr","savex premium fre","savex premium fresh","savex premium fresh u","savex premium fresh un","savex premium fresh uni","savex premium fresh universal","savex premium fresh universal detergent","savex premium fresh universal detergent 5","savex premium fresh universal detergent 5.5","savex premium fresh universal detergent 5.5kg"],
  macedoniannameKeywords: ["—Å","—Å–∞","—Å–∞–≤","—Å–∞–≤–µ","—Å–∞–≤–µ–∫","—Å–∞–≤–µ–∫—Å","—Å–∞–≤–µ–∫—Å ","—Å–∞–≤–µ–∫—Å –ø","—Å–∞–≤–µ–∫—Å –ø—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥"],
  albeniannameKeywords: ["d","de","det","deter","deterg","detergj","detergje","detergjent","detergjent s","detergjent sa","detergjent sav","detergjent savex","detergjent savex ","detergjent savex p","detergjent savex pr","detergjent savex premium","detergjent savex premium fresh","detergjent savex premium fresh 5","detergjent savex premium fresh 5.5","detergjent savex premium fresh 5.5kg"]
}
‚úÖ Stage 1: englishNameKeywords - Added unique product: Savex Premium Fresh Universal Detergent 5.5kg
üîç Stage 2: Searching macedoniannameKeywords
üìä Stage 2: macedoniannameKeywords: Found 0 results
üîç Stage 3: Searching albeniannameKeywords
üìä Stage 2: macedoniannameKeywords: Found 0 results
üîç Stage 3: Searching albeniannameKeywords
üìä Stage 3: albeniannameKeywords: Found 0 results
üîç Stage 4: Searching keywords array
üìä Stage 3: albeniannameKeywords: Found 0 results
üîç Stage 4: Searching keywords array
üìä Stage 4: keywords: Found 0 results
üîç Stage 5: Searching tags array
üìä Stage 4: keywords: Found 0 results
üîç Stage 5: Searching tags array
üìä Stage 5: tags: Found 0 results
üîç Stage 6: Searching name field
üîç Stage 6a: Trying exact name match for: "Savex Premium Color & Care Detergent 5.5kg"
üìä Stage 5: tags: Found 0 results
üîç Stage 6: Searching name field
üîç Stage 6a: Trying exact name match for: "Savex Premium Fresh Universal Detergent 5.5kg"
üìä Stage 6a: Exact name match found 0 results
üìä Stage 6a: exact name match: Found 0 results
üîç Stage 6b: Searching name field with keyword: "savex"
üìä Stage 6a: Exact name match found 2 results
üìä Stage 6a: exact name match: Found 2 results
üîç Stage 6a: exact name match - Product found: {
  id: ' 00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  macedonianname: '–ò–º–∞–∫–æ –≤–∏–Ω–æ 0.75–ª',
  albenianname: 'Ver√´ Imako 0,75l',
  keywords: [],
  tags: [],
  englishNameKeywords: ["i","im","ima","imak","imako","imako ","imako w","imako wi","imako win","imako wine","imako wine ","imako wine 0","imako wine 0.","imako wine 0.7","imako wine 0.75","imako wine 0.75l"],
  macedoniannameKeywords: ["–∏","–∏–º","–∏–º–∞","–∏–º–∞–∫","–∏–º–∞–∫–æ","–∏–º–∞–∫–æ ","–∏–º–∞–∫–æ –≤","–∏–º–∞–∫–æ –≤–∏","–∏–º–∞–∫–æ –≤–∏–Ω","–∏–º–∞–∫–æ –≤–∏–Ω–æ","–∏–º–∞–∫–æ –≤–∏–Ω–æ ","–∏–º–∞–∫–æ –≤–∏–Ω–æ 0","–∏–º–∞–∫–æ –≤–∏–Ω–æ 0.","–∏–º–∞–∫–æ –≤–∏–Ω–æ 0.7","–∏–º–∞–∫–æ –≤–∏–Ω–æ 0.75","–∏–º–∞–∫–æ –≤–∏–Ω–æ 0.75–ª"],
  albeniannameKeywords: ["v","ve","ver","ver√´","ver√´ ","ver√´ i","ver√´ im","ver√´ ima","ver√´ imak","ver√´ imako","ver√´ imako ","ver√´ imako 0","ver√´ imako 0,","ver√´ imako 0,7","ver√´ imako 0,75","ver√´ imako 0,75l"]
}
‚ö†Ô∏è Potential data inconsistency in product "Savex Premium Fresh Universal Detergent 5.5kg": detergent name with wine translations, but continuing with match
‚úÖ Stage 6a: exact name match - Added unique product: Savex Premium Fresh Universal Detergent 5.5kg
üîç Stage 6a: exact name match - Product found: {
  id: '00GAOMXjQNgFXhjef5NA',
  name: 'Savex Premium Fresh Universal Detergent 5.5kg',
  macedonianname: '–°–∞–≤–µ–∫—Å –ü—Ä–µ–º–∏—É–º –§—Ä–µ—à –£–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –î–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥',
  albenianname: 'Detergjent Savex Premium Fresh 5.5kg',
  keywords: [],
  tags: [],
  englishNameKeywords: ["s","sa","sav","save","savex","savex ","savex p","savex pr","savex pre","savex prem","savex premi","savex premium","savex premium f","savex premium fr","savex premium fre","savex premium fresh","savex premium fresh u","savex premium fresh un","savex premium fresh uni","savex premium fresh universal","savex premium fresh universal detergent","savex premium fresh universal detergent 5","savex premium fresh universal detergent 5.5","savex premium fresh universal detergent 5.5kg"],
  macedoniannameKeywords: ["—Å","—Å–∞","—Å–∞–≤","—Å–∞–≤–µ","—Å–∞–≤–µ–∫","—Å–∞–≤–µ–∫—Å","—Å–∞–≤–µ–∫—Å ","—Å–∞–≤–µ–∫—Å –ø","—Å–∞–≤–µ–∫—Å –ø—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç","—Å–∞–≤–µ–∫—Å –ø—Ä–µ–º–∏—É–º —Ñ—Ä–µ—à —É–Ω–∏–≤–µ—Ä–∑–∞–ª–µ–Ω –¥–µ—Ç–µ—Ä–≥–µ–Ω—Ç 5.5–∫–≥"],
  albeniannameKeywords: ["d","de","det","deter","deterg","detergj","detergje","detergjent","detergjent s","detergjent sa","detergjent sav","detergjent savex","detergjent savex ","detergjent savex p","detergjent savex pr","detergjent savex premium","detergjent savex premium fresh","detergjent savex premium fresh 5","detergjent savex premium fresh 5.5","detergjent savex premium fresh 5.5kg"]
}
üîÑ Stage 6a: exact name match - Skipped duplicate product: Savex Premium Fresh Universal Detergent 5.5kg
üîç Stage 6b: Searching name field with keyword: "savex"
üìä Stage 6b: Keyword "savex" found 0 results
üìä Stage 6b: name field keyword "savex": Found 0 results
üîç Stage 6b: Searching name field with keyword: "premium"
üìä Stage 6b: Keyword "savex" found 0 results
üìä Stage 6b: name field keyword "savex": Found 0 results
üîç Stage 6b: Searching name field with keyword: "premium"
üìä Stage 6b: Keyword "premium" found 0 results
üìä Stage 6b: name field keyword "premium": Found 0 results
üîç Stage 6b: Searching name field with keyword: "color"
üìä Stage 6b: Keyword "premium" found 0 results
üìä Stage 6b: name field keyword "premium": Found 0 results
üîç Stage 6b: Searching name field with keyword: "fresh"
üìä Stage 6b: Keyword "color" found 0 results
üìä Stage 6b: name field keyword "color": Found 0 results
üîç Stage 6b: Searching name field with keyword: "care"
üìä Stage 6b: Keyword "fresh" found 0 results
üìä Stage 6b: name field keyword "fresh": Found 0 results
üîç Stage 6b: Searching name field with keyword: "universal"
üìä Stage 6b: Keyword "care" found 0 results
üìä Stage 6b: name field keyword "care": Found 0 results
üîç Stage 6b: Searching name field with keyword: "detergent"
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '2a81622a-98dd-4f10-8950-7dd5122ad52c',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 29ms
üìä Stage 6b: Keyword "universal" found 0 results
üìä Stage 6b: name field keyword "universal": Found 0 results
üîç Stage 6b: Searching name field with keyword: "detergent"
üìä Stage 6b: Keyword "detergent" found 0 results
üìä Stage 6b: name field keyword "detergent": Found 0 results
üîç Stage 6b: Searching name field with keyword: "5kg"
üìä Stage 6b: Keyword "detergent" found 0 results
üìä Stage 6b: name field keyword "detergent": Found 0 results
üîç Stage 6b: Searching name field with keyword: "5kg"
üìä Stage 6b: Keyword "5kg" found 0 results
üìä Stage 6b: name field keyword "5kg": Found 0 results
üîç Stage 6b: Searching name field with keyword: "30"
üìä Stage 6b: Keyword "5kg" found 0 results
üìä Stage 6b: name field keyword "5kg": Found 0 results
üîç Stage 6b: Searching name field with keyword: "30"
üìä Stage 6b: Keyword "30" found 0 results
üìä Stage 6b: name field keyword "30": Found 0 results
üîç Stage 6b: Searching name field with keyword: "68"
üìä Stage 6b: Keyword "30" found 0 results
üìä Stage 6b: name field keyword "30": Found 0 results
üîç Stage 6b: Searching name field with keyword: "68"
üìä Stage 6b: Keyword "68" found 0 results
üìä Stage 6b: name field keyword "68": Found 0 results
üîç Stage 6b: Searching name field with keyword: "washes"
üìä Stage 6b: Keyword "68" found 0 results
üìä Stage 6b: name field keyword "68": Found 0 results
üîç Stage 6b: Searching name field with keyword: "washes"
üìä Stage 6b: Keyword "washes" found 0 results
üìä Stage 6b: name field keyword "washes": Found 0 results
üîç Stage 6b: Searching name field with keyword: "50"
üìä Stage 6b: Keyword "washes" found 0 results
üìä Stage 6b: name field keyword "washes": Found 0 results
üîç Stage 6b: Searching name field with keyword: "50"
üìä Stage 6b: Keyword "50" found 0 results
üìä Stage 6b: name field keyword "50": Found 0 results
üîç Stage 7: Searching macedonianname field
üìä Stage 6b: Keyword "50" found 0 results
üìä Stage 6b: name field keyword "50": Found 0 results
üîç Stage 7: Searching macedonianname field
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '20fcfb14-6f04-41c3-b2cd-a39af4805a1f',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 27ms
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üìä Stage 7: macedonianname field: Found 0 results
üîç Stage 8: Searching albenianname field
üìä Stage 7: macedonianname field: Found 0 results
üîç Stage 8: Searching albenianname field
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üîç Stage 9: Searching superMarketName field
üìä Stage 8: albenianname field: Found 0 results
üìä Stage 8: albenianname field: Found 0 results
üîç Stage 9: Searching superMarketName field
üìä Stage 9: superMarketName field: Found 0 results
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '002dda7c-efcc-47a6-8ccf-06335ca7c923',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 21ms
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üîç Stage 10: Searching description field (fallback)
üìä Stage 9: superMarketName field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 9: superMarketName field: Found 0 results
üîç Stage 10: Searching description field (fallback)
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': 'f139784a-110d-4924-a1ad-6f5c4c3c1614',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 24ms
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
üìä Stage 10: description field: Found 0 results
‚úÖ Found 1 potential product matches
‚úÖ Found 1 potential matches
  inngest:01K31AVVYACFAN20C9RTA786Z3 result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVWV4DAW9NBN5DWHVNXT',
      name: 'flyer/product-match',
      ts: 1755612835739,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVYACFAN20C9RTA786Z3',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
    op: 'StepRun',
    name: 'search-products',
    opts: {},
    displayName: 'search-products',
    data: [ [Object] ]
  }
} +22s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 21795ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 existing state keys: [
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVWV4DAW9NBN5DWHVNXT',
  parsedItemId: '01xb6vZYNPK6CFmFbJov'
}
  inngest:01K31AVVYACFAN20C9RTA786Z3 checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +2ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 executing step "score-matches" +0ms
üß† Processing 1 potential matches for deduplication and AI scoring
‚è±Ô∏è Score matches step started at 2025-08-19T14:14:18.986Z
üîÑ Deduplicated from 1 to 1 unique products
‚è±Ô∏è Setting AI scoring timeout to 40 seconds
üîç Fetching active auto-approval rule using admin SDK
üöÄ AI scoring promise created at 2025-08-19T14:14:18.989Z
üìä Stage 10: description field: Found 0 results
‚úÖ Found active auto-approval rule: 6LwmkueLAuQfQnxo1t8k
ü§ñ Starting Gemini API call at 2025-08-19T14:14:19.365Z
üìã Prompt length: 3561 characters
üìä Stage 10: description field: Found 0 results
‚úÖ Found 2 potential product matches
‚úÖ Found 2 potential matches
  inngest:01K31AVVY48R5M456VQHMPM5EV result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVX0ZH0NHGH3JHZN0E3V',
      name: 'flyer/product-match',
      ts: 1755612835744,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVY48R5M456VQHMPM5EV',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
    op: 'StepRun',
    name: 'search-products',
    opts: {},
    displayName: 'search-products',
    data: [ [Object], [Object] ]
  }
} +22s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 22036ms
  inngest:01K31AVVY48R5M456VQHMPM5EV created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV existing state keys: [
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVX0ZH0NHGH3JHZN0E3V',
  parsedItemId: 'ppfi7h7S0wO4Sm0ixgNC'
}
  inngest:01K31AVVY48R5M456VQHMPM5EV checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +2ms
  inngest:01K31AVVY48R5M456VQHMPM5EV executing step "score-matches" +1ms
üß† Processing 2 potential matches for deduplication and AI scoring
‚è±Ô∏è Score matches step started at 2025-08-19T14:14:19.440Z
üîÑ Deduplicated from 2 to 2 unique products
‚è±Ô∏è Setting AI scoring timeout to 40 seconds
üîç Fetching active auto-approval rule using admin SDK
üöÄ AI scoring promise created at 2025-08-19T14:14:19.441Z
‚úÖ Found active auto-approval rule: 6LwmkueLAuQfQnxo1t8k
ü§ñ Starting Gemini API call at 2025-08-19T14:14:19.789Z
üìã Prompt length: 3778 characters
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': 'dacde03e-aa70-4def-81b4-fd3d416609c9',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 19ms
‚úÖ Gemini API call completed at 2025-08-19T14:14:23.217Z
üìÑ Received response of length: 356 characters
ü§ñ Raw Gemini response length: 356
‚úÖ Found 1 valid matches after filtering
üèÅ Product matching completed with 1 matches
Match #1: productId=00GAOMXjQNgFXhjef5NA, score=0.85, can_auto_merge=true
üéØ AI scoring completed at 2025-08-19T14:14:23.219Z with 1 scored matches
‚è±Ô∏è Score matches step completed at 2025-08-19T14:14:23.219Z
  inngest:01K31AVVYACFAN20C9RTA786Z3 result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVWV4DAW9NBN5DWHVNXT',
      name: 'flyer/product-match',
      ts: 1755612835739,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVYACFAN20C9RTA786Z3',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'score-matches': {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
    op: 'StepRun',
    name: 'score-matches',
    opts: {},
    displayName: 'score-matches',
    data: [ [Object] ]
  }
} +4s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 4254ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 existing state keys: [
  '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 starting V1 execution +1ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVWV4DAW9NBN5DWHVNXT',
  parsedItemId: '01xb6vZYNPK6CFmFbJov'
}
  inngest:01K31AVVYACFAN20C9RTA786Z3 checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +3ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 executing step "check-auto-approval" +1ms
üìä Checking auto-approval for 1 potential matches
üîç Auto-approval workflow step started at 2025-08-19T14:14:23.340Z
üìã Parsed item ID: 01xb6vZYNPK6CFmFbJov
‚è±Ô∏è Setting auto-approval timeout to 20 seconds
Match #1: productId=00GAOMXjQNgFXhjef5NA, relevanceScore=0.85, reason=Strong name similarity (Savex Premium, 5.5kg) and matching brand, same category.
üöÄ Auto-approval approved for product: 00GAOMXjQNgFXhjef5NA with confidence 0.85
üìù Reason: Strong name similarity (Savex Premium, 5.5kg) and matching brand, same category.
‚úÖ Auto-approval completed successfully at 2025-08-19T14:14:23.341Z
‚è±Ô∏è Auto-approval step completed at 2025-08-19T14:14:23.342Z
  inngest:01K31AVVYACFAN20C9RTA786Z3 result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVWV4DAW9NBN5DWHVNXT',
      name: 'flyer/product-match',
      ts: 1755612835739,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVYACFAN20C9RTA786Z3',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'score-matches': {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'check-auto-approval': {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '264b57991efed85f2e14313161ab14957e9cb996',
    op: 'StepRun',
    name: 'check-auto-approval',
    opts: {},
    displayName: 'check-auto-approval',
    data: {
      shouldAutoApprove: true,
      productId: '00GAOMXjQNgFXhjef5NA',
      reasoning: 'Auto-approved based on high relevance score of 0.85',
      confidence: 0.85
    }
  }
} +3ms
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 27ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 existing state keys: [
  '264b57991efed85f2e14313161ab14957e9cb996',
  '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +1ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVWV4DAW9NBN5DWHVNXT',
  parsedItemId: '01xb6vZYNPK6CFmFbJov'
}
  inngest:01K31AVVYACFAN20C9RTA786Z3 checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'save-matches-and-auto-approve',
      op: 'StepPlanned',
      name: 'save-matches-and-auto-approve',
      displayName: 'save-matches-and-auto-approve',
      opts: {},
      rawArgs: [Array],
      hashedId: '687d47a29ee00581fe23db572f967bf594c82738',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +3ms
  inngest:01K31AVVYACFAN20C9RTA786Z3 executing step "save-matches-and-auto-approve" +1ms
üíæ Saving 1 matches to database
‚è±Ô∏è Save matches step started at 2025-08-19T14:14:23.487Z
‚úÖ Validated 1 matches for Firestore update
üîç Sample match structure: {"productId":"00GAOMXjQNgFXhjef5NA","relevanceScore":0.85,"matchReason":"Strong name similarity (Savex Premium, 5.5kg) and matching brand, same category.","matchedAt":{"_seconds":1755612863,"_nanoseco...
üöÄ Auto-approved and applied to product: 00GAOMXjQNgFXhjef5NA
üìù Status set to: applied_to_product
üìù Updating parsed flyer item 01xb6vZYNPK6CFmFbJov
üîç Update data structure check: {"matchedProducts":[{"productId":"00GAOMXjQNgFXhjef5NA","relevanceScore":0.85,"matchReason":"Strong name similarity (Savex Premium, 5.5kg) and matching brand, same category.","matchedAt":{"_seconds":1...
‚úÖ Gemini API call completed at 2025-08-19T14:14:23.936Z
üìÑ Received response of length: 725 characters
ü§ñ Raw Gemini response length: 725
‚úÖ Found 2 valid matches after filtering
üèÅ Product matching completed with 2 matches
Match #1: productId=00GAOMXjQNgFXhjef5NA, score=0.95, can_auto_merge=true
Match #2: productId=00GAOMXjQNgFXhjef5NA, score=0.10, can_auto_merge=false
üéØ AI scoring completed at 2025-08-19T14:14:23.937Z with 2 scored matches
‚è±Ô∏è Score matches step completed at 2025-08-19T14:14:23.937Z
  inngest:01K31AVVY48R5M456VQHMPM5EV result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVX0ZH0NHGH3JHZN0E3V',
      name: 'flyer/product-match',
      ts: 1755612835744,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVY48R5M456VQHMPM5EV',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'score-matches': {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
    op: 'StepRun',
    name: 'score-matches',
    opts: {},
    displayName: 'score-matches',
    data: [ [Object], [Object] ]
  }
} +4s
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 4520ms
  inngest:01K31AVVY48R5M456VQHMPM5EV created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV existing state keys: [
  '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +1ms
  inngest:01K31AVVY48R5M456VQHMPM5EV starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVX0ZH0NHGH3JHZN0E3V',
  parsedItemId: 'ppfi7h7S0wO4Sm0ixgNC'
}
  inngest:01K31AVVY48R5M456VQHMPM5EV checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +2ms
  inngest:01K31AVVY48R5M456VQHMPM5EV executing step "check-auto-approval" +1ms
üìä Checking auto-approval for 1 potential matches
üîç Auto-approval workflow step started at 2025-08-19T14:14:24.085Z
üìã Parsed item ID: ppfi7h7S0wO4Sm0ixgNC
‚è±Ô∏è Setting auto-approval timeout to 20 seconds
Match #1: productId=00GAOMXjQNgFXhjef5NA, relevanceScore=0.95, reason=Strong name similarity, matching brand, size and category
üöÄ Auto-approval approved for product: 00GAOMXjQNgFXhjef5NA with confidence 0.95
üìù Reason: Strong name similarity, matching brand, size and category
‚úÖ Auto-approval completed successfully at 2025-08-19T14:14:24.086Z
‚è±Ô∏è Auto-approval step completed at 2025-08-19T14:14:24.087Z
  inngest:01K31AVVY48R5M456VQHMPM5EV result: {
  type: 'step-ran',
  ctx: {
    event: {
      data: [Object],
      id: '01K31AVVX0ZH0NHGH3JHZN0E3V',
      name: 'flyer/product-match',
      ts: 1755612835744,
      user: {}
    },
    events: [ [Object] ],
    runId: '01K31AVVY48R5M456VQHMPM5EV',
    attempt: 0,
    step: {
      sendEvent: [AsyncFunction (anonymous)],
      waitForSignal: [AsyncFunction (anonymous)],
      sendSignal: [AsyncFunction (anonymous)],
      waitForEvent: [AsyncFunction (anonymous)],
      run: [AsyncFunction (anonymous)],
      ai: [Object],
      sleep: [AsyncFunction (anonymous)],
      sleepUntil: [AsyncFunction (anonymous)],
      invoke: [AsyncFunction (anonymous)],
      fetch: [AsyncFunction],
      [Symbol(inngest.step.gateway)]: [AsyncFunction (anonymous)]
    },
    logger: ProxyLogger { enabled: true, logger: DefaultLogger {} }
  },
  ops: {
    'update-status-to-processing': {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'search-products': {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'score-matches': {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    'check-auto-approval': {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  },
  step: {
    id: '264b57991efed85f2e14313161ab14957e9cb996',
    op: 'StepRun',
    name: 'check-auto-approval',
    opts: {},
    displayName: 'check-auto-approval',
    data: {
      shouldAutoApprove: true,
      productId: '00GAOMXjQNgFXhjef5NA',
      reasoning: 'Auto-approved based on high relevance score of 0.95',
      confidence: 0.95
    }
  }
} +2ms
 POST /api/inngest?fnId=badiyala-flyer-parser-match-products&stepId=step 206 in 20ms
  inngest:01K31AVVY48R5M456VQHMPM5EV created new V1 execution for run; discovering steps +0ms
  inngest:01K31AVVY48R5M456VQHMPM5EV existing state keys: [
  '264b57991efed85f2e14313161ab14957e9cb996',
  '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
  '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
  'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d'
] +1ms
  inngest:01K31AVVY48R5M456VQHMPM5EV starting V1 execution +0ms
üîÑ PRODUCT MATCHING WORKFLOW STARTED {
  eventId: '01K31AVVX0ZH0NHGH3JHZN0E3V',
  parsedItemId: 'ppfi7h7S0wO4Sm0ixgNC'
}
  inngest:01K31AVVY48R5M456VQHMPM5EV checkpoint: {
  type: 'steps-found',
  steps: [
    {
      id: 'update-status-to-processing',
      op: 'StepPlanned',
      name: 'update-status-to-processing',
      displayName: 'update-status-to-processing',
      opts: {},
      rawArgs: [Array],
      hashedId: 'd00ed8ad3f033bcbd62b1f182ab7fd0abc152f5d',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'search-products',
      op: 'StepPlanned',
      name: 'search-products',
      displayName: 'search-products',
      opts: {},
      rawArgs: [Array],
      hashedId: '68c878c636e3b59bb8a58c6dfa4fe6c333d685d5',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'score-matches',
      op: 'StepPlanned',
      name: 'score-matches',
      displayName: 'score-matches',
      opts: {},
      rawArgs: [Array],
      hashedId: '59fbb86e379cc6e59609c356a33c3a8e50976aeb',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'check-auto-approval',
      op: 'StepPlanned',
      name: 'check-auto-approval',
      displayName: 'check-auto-approval',
      opts: {},
      rawArgs: [Array],
      hashedId: '264b57991efed85f2e14313161ab14957e9cb996',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: true,
      hasStepState: true,
      handled: true,
      handle: [Function: handle]
    },
    {
      id: 'save-matches-and-auto-approve',
      op: 'StepPlanned',
      name: 'save-matches-and-auto-approve',
      displayName: 'save-matches-and-auto-approve',
      opts: {},
      rawArgs: [Array],
      hashedId: '687d47a29ee00581fe23db572f967bf594c82738',
      input: undefined,
      fn: [Function (anonymous)],
      promise: [Promise],
      fulfilled: false,
      hasStepState: false,
      handled: false,
      handle: [Function: handle]
    }
  ]
} +2ms
  inngest:01K31AVVY48R5M456VQHMPM5EV executing step "save-matches-and-auto-approve" +1ms
üíæ Saving 1 matches to database
‚è±Ô∏è Save matches step started at 2025-08-19T14:14:24.234Z
‚úÖ Validated 1 matches for Firestore update
üîç Sample match structure: {"productId":"00GAOMXjQNgFXhjef5NA","relevanceScore":0.95,"matchReason":"Strong name similarity, matching brand, size and category","matchedAt":{"_seconds":1755612864,"_nanoseconds":233000000},"produc...
üöÄ Auto-approved and applied to product: 00GAOMXjQNgFXhjef5NA
üìù Status set to: applied_to_product
üìù Updating parsed flyer item ppfi7h7S0wO4Sm0ixgNC
‚úÖ Successfully updated parsed flyer item 01xb6vZYNPK6CFmFbJov
‚úÖ Successfully saved matches and status for item 01xb6vZYNPK6CFmFbJov
üèÅ Auto-approval status set to: success
üìä Auto-approval fields: {"status":"success","reason":"Auto-approved based on high relevance score of 0.85","confidence":0.85,"timestamp":"2025-08-19T14:14:23.488Z"}
‚è±Ô∏è Workflow step completed at 2025-08-19T14:14:24.281Z
üîÑ Total workflow duration: 28.542 seconds
=================================================

‚ö†Ô∏è  We detected that you have nested `step.*` tooling in `auto-apply-discount`
    at prettyError (webpack-internal:///(rsc)/./node_modules/.pnpm/inngest@3.40.1_next@14.2.31_6e26cb770b1ca72b2f352972f192bf38/node_modules/inngest/helpers/errors.js:303:29)
    at stepHandler (webpack-internal:///(rsc)/./node_modules/.pnpm/inngest@3.40.1_next@14.2.31_6e26cb770b1ca72b2f352972f192bf38/node_modules/inngest/components/execution/v1.js:708:58)

It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine. Nesting `step.*` tooling is not supported.

Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.

Code: NESTING_STEPS

=================================================
üîç Update data structure check: {"matchedProducts":[{"productId":"00GAOMXjQNgFXhjef5NA","relevanceScore":0.95,"matchReason":"Strong name similarity, matching brand, size and category","matchedAt":{"_seconds":1755612864,"_nanoseconds...
‚úÖ Successfully updated parsed flyer item ppfi7h7S0wO4Sm0ixgNC
‚úÖ Successfully saved matches and status for item ppfi7h7S0wO4Sm0ixgNC
üèÅ Auto-approval status set to: success
üìä Auto-approval fields: {"status":"success","reason":"Auto-approved based on high relevance score of 0.95","confidence":0.95,"timestamp":"2025-08-19T14:14:24.235Z"}
‚è±Ô∏è Workflow step completed at 2025-08-19T14:14:25.252Z
üîÑ Total workflow duration: 29.508 seconds
=================================================

‚ö†Ô∏è  We detected that you have nested `step.*` tooling in `auto-apply-discount`
    at prettyError (webpack-internal:///(rsc)/./node_modules/.pnpm/inngest@3.40.1_next@14.2.31_6e26cb770b1ca72b2f352972f192bf38/node_modules/inngest/helpers/errors.js:303:29)
    at stepHandler (webpack-internal:///(rsc)/./node_modules/.pnpm/inngest@3.40.1_next@14.2.31_6e26cb770b1ca72b2f352972f192bf38/node_modules/inngest/components/execution/v1.js:708:58)

It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine. Nesting `step.*` tooling is not supported.

Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.

Code: NESTING_STEPS

=================================================
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '13c38902-0adf-4f95-b8f4-0b18cae1ef28',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 20ms
[Inngest] debug - registered inngest functions: 200 OK {
  ok: true,
  modified: false,
  'sync_id.omitempty': '6e0d05ed-767a-4892-a558-9dab73c72011',
  app_id: 'ed1dd999-5829-5a8a-b82a-e8258ddeb289'
}
 PUT /api/inngest 200 in 25ms
[Inngest]